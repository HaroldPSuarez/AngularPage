<div class="compare-page">
  <div class="compare-header">
    <div class="container">
      <h1>Comparador de Veh√≠culos</h1>
      <p>Compara hasta 3 veh√≠culos cl√°sicos lado a lado</p>
    </div>
  </div>

  <div class="compare-content">
    <div class="container">
      <!-- Selectores -->
      <div class="car-selectors">
        <div class="selector-card">
          <h3>Veh√≠culo 1</h3>
          <mat-form-field appearance="outline">
            <mat-label>Seleccionar veh√≠culo</mat-label>
            <mat-select [(ngModel)]="selectedCarId1">
              <mat-option [value]="null">-- Ninguno --</mat-option>
              <mat-option *ngFor="let car of availableCars" [value]="car.id">
                {{ car.brand }} {{ car.name }} ({{ car.year }})
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="selector-card">
          <h3>Veh√≠culo 2</h3>
          <mat-form-field appearance="outline">
            <mat-label>Seleccionar veh√≠culo</mat-label>
            <mat-select [(ngModel)]="selectedCarId2">
              <mat-option [value]="null">-- Ninguno --</mat-option>
              <mat-option *ngFor="let car of availableCars" [value]="car.id">
                {{ car.brand }} {{ car.name }} ({{ car.year }})
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="selector-card">
          <h3>Veh√≠culo 3 (Opcional)</h3>
          <mat-form-field appearance="outline">
            <mat-label>Seleccionar veh√≠culo</mat-label>
            <mat-select [(ngModel)]="selectedCarId3">
              <mat-option [value]="null">-- Ninguno --</mat-option>
              <mat-option *ngFor="let car of availableCars" [value]="car.id">
                {{ car.brand }} {{ car.name }} ({{ car.year }})
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <!-- Tabla de Comparaci√≥n -->
      <div class="comparison-table" *ngIf="selectedCars.length > 0">
        <table mat-table [dataSource]="selectedCars" class="custom-table">
          <!-- Columna de Imagen -->
          <ng-container matColumnDef="image">
            <th mat-header-cell *matHeaderCellDef>Veh√≠culo</th>
            <td mat-cell *matCellDef="let car">
              <div class="car-image-cell">
                <img [src]="car.image" [alt]="car.name" />
                <div class="car-name">
                  <strong>{{ car.brand }}</strong>
                  <span>{{ car.name }}</span>
                </div>
              </div>
            </td>
          </ng-container>

          <!-- Columna de A√±o -->
          <ng-container matColumnDef="year">
            <th mat-header-cell *matHeaderCellDef>A√±o</th>
            <td mat-cell *matCellDef="let car" [class.winner]="isWinner(car, 'year')">
              {{ car.year }}
              <span class="trophy" *ngIf="isWinner(car, 'year')">üèÜ</span>
            </td>
          </ng-container>

          <!-- Columna de Motor -->
          <ng-container matColumnDef="engine">
            <th mat-header-cell *matHeaderCellDef>Motor</th>
            <td mat-cell *matCellDef="let car">{{ car.engine }}</td>
          </ng-container>

          <!-- Columna de Potencia -->
          <ng-container matColumnDef="horsepower">
            <th mat-header-cell *matHeaderCellDef>Potencia</th>
            <td mat-cell *matCellDef="let car" [class.winner]="isWinner(car, 'horsepower')">
              {{ car.horsepower }} HP
              <span class="trophy" *ngIf="isWinner(car, 'horsepower')">üèÜ</span>
            </td>
          </ng-container>

          <!-- Columna de Velocidad M√°xima -->
          <ng-container matColumnDef="topSpeed">
            <th mat-header-cell *matHeaderCellDef>V. M√°xima</th>
            <td mat-cell *matCellDef="let car">{{ car.topSpeed }}</td>
          </ng-container>

          <!-- Columna de Aceleraci√≥n -->
          <ng-container matColumnDef="acceleration">
            <th mat-header-cell *matHeaderCellDef>Aceleraci√≥n</th>
            <td mat-cell *matCellDef="let car">{{ car.acceleration }}</td>
          </ng-container>

          <!-- Columna de Precio -->
          <ng-container matColumnDef="price">
            <th mat-header-cell *matHeaderCellDef>Precio</th>
            <td mat-cell *matCellDef="let car">{{ car.price }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>

      <!-- Mensaje cuando no hay carros seleccionados -->
      <div class="no-comparison" *ngIf="selectedCars.length === 0">
        <div class="empty-state">
          <div style="font-size: 4rem; margin-bottom: 1rem;">üèéÔ∏è</div>
          <h3>No hay veh√≠culos para comparar</h3>
          <p>Selecciona al menos un veh√≠culo arriba para comenzar la comparaci√≥n</p>
        </div>
      </div>
    </div>
  </div>
</div>